<div>
  <header class='sheet-header'>
    <div class="flexcol flex-between flex-center">
      <img class='profile-img' src='{{item.img}}' data-edit='img' data-action='onEditImage' data-tooltip='{{item.name}}' />
      <div class="align-center mb-10 mr-10 rollable" {{#if system.readied}}
        data-tooltip="{{localize 'SDM.ItemReadied' }}" {{else}} data-tooltip="{{localize 'SDM.ItemNotReadied'}}" {{/if}}
        data-action="toggleReadied">
        <div class='resource-label'>
          {{#if system.readied}}
          {{localize 'SDM.ItemReadied' }}
          {{else}}
          {{localize 'SDM.ItemNotReadied'}}
          {{/if}}
        </div>
        <i class="fa-regular fa-shield resource-content {{ifThen system.readied 'readied' 'not-readied'}}"></i>
      </div>
    </div>

    <div class='header-fields mt-10'>
      <div class='document-name'>
        <input name='name' type='text' value='{{item.name}}' placeholder='Name' />
      </div>
      <div class='grid grid-2col'>
        <div class='resource'>
          <label class='resource-label'>{{localize 'SDM.ItemQuantity'}}
            <input type='text' name='system.quantity' value='{{system.quantity}}' data-dtype='Number' />
          </label>
        </div>
        <div class='resource'>
          {{#unless (eq system.size.unit 'cash')}}
            <label class='resource-label'>{{localize 'SDM.ItemCost'}}</label>
            <input type='text' name='system.cost' value='{{system.cost}}' data-dtype='Number' />
          {{/unless}}
        </div>

        <div class='resource'>
          <label class='resource-label'>{{localize 'SDM.ItemSizeValue'}}</label>
          <input type='text' name='system.size.value' value='{{system.size.value}}' data-dtype='Number' />
        </div>
        <div class='resource'>
          <label class='resource-label'>{{localize 'SDM.ItemSizeUnit'}}</label>
          <select name='system.size.unit'>
            <option value=''></option>
            {{selectOptions sizeUnits localize=true selected=system.size.unit}}
          </select>
        </div>
      </div>
  </header>
  <header>
    <div class='grid grid-3col'>
    {{#if (ne item.system.size.unit 'cash')}}
      <div class="resource">
        <label class='resource-label'>{{localize 'SDM.ItemGearType'}}</label>
        <select name='system.type' class="resource-content">
          {{selectOptions config.gearType localize=true selected=system.type sort=true blank='TYPE.Gear'}}
        </select>
      </div>

      {{#if (eq item.system.type 'weapon')}}
      <div class='resource'>
        <label class='resource-label'>
          {{localize 'SDM.WeaponDamage'}}
        </label>
        <div class='resource-content'>
          <input type='text' name='system.weapon.damage.base' value='{{system.weapon.damage.base}}' />
        </div>
      </div>
      <div class="resource">
        <label class='resource-label'>{{localize 'SDM.WeaponRange'}}</label>
        <select name='system.weapon.range' class="resource-content">
          <option value=''></option>
          {{selectOptions config.rangeType localize=true selected=system.weapon.range}}
        </select>
      </div>

      <div class='resource align-center'>
        <label class='resource-label'>
          {{localize 'SDM.WeaponVersatile'}}
        </label>
        <div class='resource-content align-center'>
          <input type='checkbox' name='system.weapon.versatile' {{checked system.weapon.versatile}} />
        </div>
      </div>

      <div class='resource'>
        {{#if system.weapon.versatile}}
        <label class='resource-label'>
          {{localize 'SDM.WeaponVersatileDamage'}}
        </label>
        <div class='resource-content'>
          <input type='text' name='system.weapon.damage.versatile' value='{{system.weapon.damage.versatile}}' />
        </div>
        {{/if}}
      </div>

      {{#if (ne item.parent.type 'npc')}}
      <div class='resource'>
        <label class='resource-label'>
          {{localize 'SDM.AbilityModifier'}}
        </label>
        <div class='resource-content'>
          <select name="system.default_ability" id="system.default_ability">
            <option value=""></option>
            {{selectOptions config.abilities localize=true selected=system.default_ability}}
          </select>
        </div>
      </div>
      {{/if}}
      {{/if}}



      {{#if (eq item.system.type 'armor')}}
      <div class='resource'>
        <label class='resource-label'>
          {{localize 'SDM.ArmorValue'}}
        </label>
        <div class='resource-content'>
          <input type='text' name='system.armor.value' value='{{system.armor.value}}' data-dtype='Number' />
        </div>
      </div>

      <div class="resource">
        <label class='resource-label'>{{localize 'SDM.ArmorType'}}</label>
        <select name='system.armor.type' class="resource-content">
          <option value=''></option>
          {{selectOptions config.armorType localize=true selected=system.armor.type}}
        </select>
      </div>
      {{/if}}

      {{#if (eq item.system.type 'ward')}}
      <div class='resource'>
        <label class='resource-label'>
          {{localize 'SDM.WardValue'}}
        </label>
        <div class='resource-content'>
          <input type='text' name='system.ward.value' value='{{system.ward.value}}' data-dtype='Number' />
        </div>
      </div>

      <div class="resource">
        <label class='resource-label'>{{localize 'SDM.WardType'}}</label>
        <select name='system.ward.type' class="resource-content">
          <option value=''></option>
          {{selectOptions config.wardType localize=true selected=system.ward.type}}
        </select>
      </div>
      {{/if}}

      {{#if (eq item.system.type 'power')}}
      {{!-- Start fragment --}}
      {{> ($$ "item/power") item=item abilities=config.abilities}}
      {{!-- End fragment --}}
      {{/if}}


      {{#if (eq item.system.type 'power_container')}}
      <div class="resource">
        <label class='resource-label'>
          {{localize 'SDM.GearMaxPowers'}}
        </label>
        <input type='text' name='system.max_powers' value='{{system.max_powers}}' data-dtype='Number' />
      </div>
      <div class="resource"></div>
      <div class="resource grid-span-3">
        <ol class='items-list power-container'>
          <li class='item flexrow items-header'>
            <div class='item-name flex-between'>
              <div class="rollable power-prev" data-action="prevPower" {{#unless hasPrevious}}disabled{{/unless}}>
                <i class="fas fa-chevron-left"></i>
              </div>
              <div class="rollable power-counter">
               {{ifThen (gt powerCount 0) (addOne currentPowerIndex) powerCount}} / {{powerCount}}
              </div>
              <div class="rollable power-next"  data-action="nextPower" {{#unless hasNext}}disabled{{/unless}}>
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
            <div class='item-formula flexrow'>
            </div>
            <div class='item-controls'>

              {{#if @root.editable}}
              <a
                class='item-control item-create'
                data-tooltip="{{localize 'DOCUMENT.Create' type=(localize 'TYPES.Item.power')}}"
                data-action='addPower'
                data-container='{{item.uuid}}'
              >
                <i class='fas fa-plus'></i>
                {{localize 'DOCUMENT.New' type=(localize 'TYPES.Item.power')}}
              </a>
              {{/if}}
            </div>
          </li>
          {{> ($$ "item/power_container")
            abilities=config.abilities
            index=currentPowerIndex
            enrichedPowers=@root.enrichedPowers
            powers=@root.powers}}
        </ol>
        </div>
        {{/if}}
      {{/if}}
    </div>
</div>
</div>
</header>
</div>
