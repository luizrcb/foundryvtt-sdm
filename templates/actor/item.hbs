<li
  class='item flexrow'
  data-item-id='{{item._id}}'
  data-drag='true'
  data-document-class='Item'
  data-tooltip="{{getItemTitle item}}"
>
  <div class='item-name'>
    <div class='item-image'>
      <img src='{{item.img}}' width='24' height='24' data-tooltip="{{item.name}}"/>
    </div>
    <div class="flexrow">
      {{#if (and
        (ne actorType 'caravan')
        (ne item.system.size.unit 'cash')
        (eq item.system.type 'weapon')
        item.system.readied
        item.system.weapon.damage.base
        @root.editable
      )}}
      <div
        class='rollable flexrow'
        data-action='roll'
        data-type='damage'
        data-label='{{item.name}}'
        data-tooltip="{{localize 'SDM.RollType' type=(localize 'SDM.Damage')}}"
      >
        <i class='fa-solid fa-dice-d20 roll-icon'></i>
      </div>
      {{/if}}

      {{#if (and
        (ne actorType 'caravan')
        (ne item.system.size.unit 'cash')
        (eq item.system.type 'power')
        item.system.readied
        item.system.power.roll_formula
        @root.editable
      )}}
      <div
        class='rollable flexrow'
        data-action='roll'
        data-type='power'
        data-label='{{item.name}}'
        data-tooltip="{{localize 'SDM.RollType' type=(localize 'SDM.Power')}}"
      >
        <i class='fa-solid fa-dice-d20 roll-icon'></i>
      </div>
      {{/if}}

      {{#if (and
        (ne actorType 'caravan')
        (ne item.system.size.unit 'cash')
        (eq item.system.type 'power_album')
        item.system.readied
        (gt item.system.powers.length 0)
        @root.editable
      )}}
      <div
        class='rollable flexrow'
        data-action='roll'
        data-type='power_album'
        data-label='{{item.name}}'
        data-tooltip="{{localize 'SDM.RollType' type=(localize 'SDM.PowerAlbum')}}"
      >
        <i class='fa-solid fa-book-sparkles roll-icon'></i>
      </div>
      {{/if}}

      {{#if (and (gt item.system.slots_taken 1) (ne item.system.size.unit 'sacks'))}}[{{item.system.slots_taken}}] {{/if}}
      {{#if (and (gt item.system.slots_taken 1) (eq item.system.size.unit 'sacks'))}}[{{toSacks item.system.slots_taken}}] {{/if}}

      {{#if (eq item.system.size.unit 'cash')}} {{item.system.quantity}} {{/if}}
      {{item.name}}

      {{#if (and (ne item.system.size.unit 'cash') (gt item.system.quantity 1))}}
      x{{item.system.quantity}}
      {{/if}}
    </div>
    <div class='flexrow align-center'>
      <div>
        {{#if item.system.versatile}}
        {{/if}}
      </div>
      <div>
      </div>
    </div>
  </div>
  <div class='item-controls'>
    {{#if @root.editable}}
    {{#if (ne actorType 'caravan')}}
    <a class="item-control">
      <i
        class="fa-regular fa-shield {{ifThen item.system.readied 'readied' 'not-readied'}}"
        data-action="toggleReadied"
        {{#if item.system.readied}}
          data-tooltip="{{localize 'SDM.ItemReadied' }}"
        {{else}}
          data-tooltip="{{localize 'SDM.ItemNotReadied'}}"
        {{/if}}
      >
      </i>
    </a>
    {{/if}}
    <a class="item-control">
      <i
        class="fa-regular fa-exchange"
        data-action="transferItem"
        data-tooltip="{{localize 'DOCUMENT.Transfer'
        type=(localize 'TYPE.Item' )}}"
      >
      </i>
    </a>
    <a
      class='item-control item-edit'
      data-tooltip='{{localize "DOCUMENT.Update"
      type=(localize "TYPE.Item")}}'
      data-action='viewDoc'
    >
      <i class='fa-solid fa-edit'></i>
    </a>

    <a
      class='item-control item-delete'
      data-tooltip='{{localize "DOCUMENT.Delete" type=(localize "TYPE.Item")}}'
      data-action='deleteDoc'
    >
      <i class='fa-solid fa-trash'></i>
    </a>
    {{/if}}
  </div>
</li>
